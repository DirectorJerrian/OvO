# 详细设计文档

## 1、引言

### 1.1编制目的

 		本报告详细完成对OvO酒店管理系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。

​		本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

### 1.2词汇表

| 词汇名称 | 词汇含义                 | 备注 |
| -------- | ------------------------ | ---- |
| OHBS     | OvO Hotel Booking System |      |
|          |                          |      |
|          |                          |      |

### 1.3参考资料

《软件工程与计算(卷二)软件开发的技术基础》

## 2、变更记录

| 修改时间   | 责任人 | 修改内容               |
| ---------- | ------ | ---------------------- |
| 2020-07-02 | 何文兵 | 初始化详细设计文档结构 |
| 2020-07-03 | 何文兵 | hotel模块和依赖视角    |
| 2020-07-03 | 巫夷 | 完成admin和coupon模块内容 |
|            |        |                        |
| | | |

## 3、产品概述

​		参考OvO酒店管理系统用例文档和OvO酒店管理系统需求规格说明文档中对产品的概括性描述。

## 4、体系结构设计概述

​		参考OvO酒店管理系统体系结构文档中对体系结构设计的概述。

## 5、结构视角

### 5.1业务逻辑层的分解

#### 5.1.1admin模块

##### 5.1.1.1 模块概述

admin模块承担的需求参见OvO酒店管理系统需求规格说明文档及相关非功能需求

admin模块的职责及接口参见OvO酒店管理系统体系结构文档中业务逻辑层分解-接口规范

##### 5.1.1.2 整体结构

根据体系结构的设计，我们将系统分为展示层、控制层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。控制层和业务逻辑层之间添加bl.admin.AdminService接口。业务逻辑层和数据层之间，我们添加data.admin.AdminMapper接口。这样，我们将依赖于接口而非实体类，增加了系统的灵活性。

###### adminbl模块各个类的设计

![adminbl模块各个类的设计](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/adminbl%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)

##### 5.1.1.3 模块内部类的接口规范

参考OvO酒店管理系统体系结构文档中AdminService的接口规范。

##### 5.1.1.4业务逻辑层的动态模型

###### addManager方法顺序图

![addManager方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/adminbl/addManager.png)

###### getAllManagers方法顺序图

![getAllManagers方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/adminbl/getAllManagers.png)

###### deleteManager方法顺序图

![deleteManager方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/adminbl/deleteManager.png)

#### 5.1.2coupon模块

##### 5.1.2.1模块概述

coupon模块承担的需求参见OvO酒店管理系统需求规格说明文档及相关非功能需求

coupon模块的职责及接口参见OvO酒店管理系统体系结构文档中业务逻辑层分解-接口规范

##### 5.1.2.2整体结构

根据体系结构的设计，我们将系统分为展示层、控制层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。控制层和业务逻辑层之间添加bl.coupon.CouponService,bl.coupon.CouponMatchStrategy接口。业务逻辑层和数据层之间，我们添加data.coupon.CouponMapper接口。这样，我们将依赖于接口而非实体类，增加了系统的灵活性。

###### couponbl模块各个类的设计

![couponbl模块各个类的设计](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/couponbl%E7%B1%BB%E7%9A%84%E8%AE%BE%E8%AE%A1.png)

##### 5.1.2.3模块内部类的接口规范

参考OvO酒店管理系统体系结构文档中CouponService和CouponMatchstrategy的接口规范。

##### 5.1.2.4业务逻辑层的动态模型

###### addHotelTargetMoneyCoupon方法顺序图

![addHotelTargetMoneyCoupon方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/couponbl/addcoupon.png)

###### getAllCoupon方法顺序图

![getAllCoupon方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/couponbl/getAllCoupon.png)

###### getHotelAllCoupons方法顺序图

![getHotelAllCoupons方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/couponbl/getHotelAllCoupon.png)

###### getOrderMatchCoupons方法顺序图

![getOrderMatchCoupons方法顺序图](https://umlpicture.oss-cn-shanghai.aliyuncs.com/%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1/couponbl/getOrderMatchCoupons.png)

#### 5.1.3hotel模块

##### 5.1.3.1模块概述

hotel模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

hotel模块的职责及接口参见体系结构文档模块职责和接口规范部分

##### 5.1.3.2整体结构

根据体系结构的设计，我们将系统分为了展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们有HotelService和RoomService两种接口，而业务逻辑层和数据层之间我们有HotelMapper和RoomMapper两种接口。为了隔离业务逻辑和控制逻辑，我们有HotelController来完成控制。业务逻辑中涉及到的有HotelInfoVO、HotelSearchVO、HotelVO、RoomVO，数据持久化对象有Hotel、HotelRoom两种。

hotel模块的设计图如下所示：

![](https://software-calculate2.oss-cn-shanghai.aliyuncs.com/software-calculate2/hotel%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E5%9B%BE.png)

##### 5.1.3.3模块内部类的接口规范

hotel模块各个类的职责和接口请参考体系结构设计文档

##### 5.1.3.4业务逻辑层的动态模型

![](https://software-calculate2.oss-cn-shanghai.aliyuncs.com/software-calculate2/%E6%A8%A1%E5%9D%97%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%8A%A8%E6%80%81%E6%A8%A1%E5%9E%8B.png)

##### 5.1.3.5业务逻辑层的设计原理

利用委托式控制风格，每个界面需要访问的业务逻辑由控制器委托给Service中的不同方法。

#### 5.1.4marketingstaff模块

#### 5.1.5order模块

#### 5.1.6user模块

#### 5.1.7voucher模块

## 6、依赖视角

前后端各个开发包的图请参照体系结构文档的开发包图